<!-- Header with toggle -->
  <div class="p-4 flex flex-col border-b border-gray-700">
    <!-- Title & search -->
    <div class="flex justify-between w-100%">
      <div class="flex items-center space-x-2">
        <h2 class="text-4xl font-semibold">Chats</h2>
        <button class="p-2 rounded hover:bg-[#222] focus:outline-none"
                (click)="onSearchToggle()"
                aria-label="Search">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
               stroke="currentColor">
            <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2" fill="none" />
            <line x1="16.5" y1="16.5" x2="21" y2="21" stroke="currentColor" stroke-width="2" />
          </svg>
        </button>
      </div>
      <div *ngIf="showSearch" class="left-auto">
        <input type="text"
               [(ngModel)]="searchTerm"
               (ngModelChange)="onSearchTermChange($event)"
               placeholder="Search chats..."
               class="w-full px-3 py-1 rounded bg-[#222] text-white focus:outline-none" />
      </div>
    </div>
    <!-- Filter buttons -->
    <div class="flex space-x-2 w-100% justify-center items-center py-5">
      <button class="px-3 py-1 rounded bg-[#b30000] text-sm"
              [class.opacity-70]="filter !== 'unread'"
              (click)="onFilterChange('unread')">
        Alle chats
      </button>
      <button class="px-3 py-1 rounded bg-[#b30000] text-sm"
              [class.opacity-70]="filter !== 'read'"
              (click)="onFilterChange('read')">
        Ungelesen
      </button>
    </div>
  </div>
  <!-- List of conversations -->
  <div class="flex-1 ">
    <ul class="flex flex-1 flex-col overflow-y-auto max-h-screen">
      <li *ngFor="let conversation of conversations"
          class="">
        <a class="block p-4 hover:bg-[#1e1e1e] cursor-pointer transition-colors duration-200"
           [class.bg-[#1e1e1e]]="selectedConversation?.id === conversation.id"
           (click)="onConversationClick(conversation)">
          <div class="flex justify-between space-x-3 border-b border-gray-700 py-3">
            <div class="flex items-center space-x-3">
              <div class="relative inline-block">
                <img [src]="conversation.avatar"
                     alt="Avatar"
                     class="w-12 h-12 rounded-full object-cover shadow-xl" />
                <div class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white"></div>
              </div>
              <div>
                <p class="text-sm">{{ conversation.name }}</p>
                <p class="text-sm text-white truncate">
                  {{ conversation?.last_message | slice:0:20 }}...
                </p>
              </div>
            </div>
            <div>
             <span class="text-xs">{{ conversation?.last_message_date | date:'HH:mm' }}</span>

            </div>
          </div>
        </a>
      </li>
    </ul>
  </div>